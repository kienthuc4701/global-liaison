---
import { marked } from 'marked';
import fetchApi from "@/lib/strapi";
import BlogLayout from "@/layouts/BlogLayout.astro";

export async function getStaticPaths() {
  const posts = await fetchApi<any>({
    endpoint: "recruitment-posts?populate=*",
    wrappedByKey: "data",
  });


  
  return posts.map((post) => ({
    params: { slug: post.attributes.slug },
    props: post,
  }));
  
}

const post = Astro.props

const {job} = post.attributes


const content = marked.parse(post.attributes.content);

---
<BlogLayout blogTitle={job.data.attributes.title}>
  <article set:html={content}/>
</BlogLayout>